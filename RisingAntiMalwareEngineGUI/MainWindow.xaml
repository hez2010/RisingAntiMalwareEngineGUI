<Window x:Class="RisingAntiMalwareEngineGUI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d3="http://research.microsoft.com/DynamicDataDisplay/1.0"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:RisingAntiMalwareEngineGUI"
        xmlns:channels="clr-namespace:System.Runtime.Remoting.Channels;assembly=mscorlib"
        mc:Ignorable="d"
        Name="Form"
        Closing="MainWindow_OnClosing"
        Loaded="MainWindow_Loaded"
        Title="RISING Anti-Malware Engine CommandLine GUI" Height="1548.85" Width="742" ResizeMode="CanMinimize" Icon="Resources/logo.png" AllowDrop="True" DragEnter="Form_DragEnter" Drop="Form_Drop">
    <Grid>
        <Image HorizontalAlignment="Left" Height="52" Margin="33,23,0,0" VerticalAlignment="Top" Width="48" Stretch="None" Source="Resources/logo.png"/>
        <Label Content="瑞星反恶意软件社区扫描版程序" HorizontalAlignment="Left" Margin="86,31,0,0" VerticalAlignment="Top" FontSize="22"/>
        <Label Name="InitLabel" Content="Label" HorizontalAlignment="Left" Height="4" Margin="86,72,0,0" VerticalAlignment="Top" Width="0" Background="#FF0046FF"/>
        <Label Name="VersionLabel" Content="" HorizontalAlignment="Left" Margin="492,41,0,0" VerticalAlignment="Top" FontSize="14"/>
        <Grid Name="ScanGrid" HorizontalAlignment="Left" Height="320" Margin="129,122,0,0" VerticalAlignment="Top" Width="564">
            <StackPanel x:Name="ProcessMetro" Margin="97,19,26,292">
                <local:MetroProcessBar Grid.Row="1" x:Name="MetroProcessbar" Foreground="Blue" />
            </StackPanel>
            <Label Content="待扫描对象：" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,10,0,0"/>
            <TextBox x:Name="FileNameTextBox" HorizontalAlignment="Left" Height="25" TextWrapping="NoWrap" VerticalAlignment="Top" Width="394" Margin="97,10,0,0"/>
            <Label Content="当前扫描：" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="153,52,0,0" Width="64"/>
            <TextBlock x:Name="TbCurrentTarget" TextWrapping="Wrap"  Margin="160,77,10,209"/>
            <Button x:Name="ButtonStart" Content="开始" HorizontalAlignment="Left" Height="25" VerticalAlignment="Top" Width="54" Click="Button_Click" Margin="496,10,0,0"/>
            <TreeView x:Name="FolderTree" HorizontalAlignment="Left" Height="230" Margin="10,52,0,0" VerticalAlignment="Top" Width="138"  TreeViewItem.Selected="FolderTree_OnSelected" TreeViewItem.Expanded="FolderTree_OnExpanded">
                <TreeView.ItemTemplate>
                    <HierarchicalDataTemplate DataType="{x:Type local:Folder}" ItemsSource="{Binding Children}">
                        <TextBlock x:Name="FolderTextBlock"  Text="{Binding Name}" />
                    </HierarchicalDataTemplate>
                </TreeView.ItemTemplate>
            </TreeView>
            <Label Content="已用时间：" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="153,116,0,0" Width="64"/>
            <Label Content="扫描速度：" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="358,116,0,0" Width="64"/>
            <Label Content="已扫文件：" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="153,146,0,0" Width="64"/>
            <Label Content="威胁数量：" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="358,146,0,0" Width="64"/>
            <GroupBox Header="CPU (%)" HorizontalAlignment="Left" Height="134" Margin="153,176,0,0" VerticalAlignment="Top" Width="199">
                <Grid HorizontalAlignment="Left" Height="115" Margin="0,0,0,0" VerticalAlignment="Top" Width="189">
                    <d3:ChartPlotter Grid.Column="0" Grid.Row="0"  x:Name="CpuPlotter"/>
                </Grid>
            </GroupBox>
            <GroupBox Header="内存 (MB)" HorizontalAlignment="Left" Height="134" Margin="358,176,0,0" VerticalAlignment="Top" Width="199">
                <Grid HorizontalAlignment="Left" Height="115" Margin="0,0,0,0" VerticalAlignment="Top" Width="189">
                    <d3:ChartPlotter Grid.Column="0" Grid.Row="0"  x:Name="MemPlotter"/>
                </Grid>
            </GroupBox>
            <Label x:Name="SpeedLabel" Content="0 个/s" HorizontalAlignment="Left" Margin="422,116,0,0" VerticalAlignment="Top" Width="132"/>
            <Label x:Name="TimeLabel" Content="00:00:00" HorizontalAlignment="Left" Margin="217,116,0,0" VerticalAlignment="Top" Width="132"/>
            <Label x:Name="FileCountLabel" Content="0" HorizontalAlignment="Left" Margin="217,146,0,0" VerticalAlignment="Top" Width="132"/>
            <Label x:Name="ThreatLabel" Content="0" HorizontalAlignment="Left" Margin="422,146,0,0" VerticalAlignment="Top" Width="132" Foreground="Red"/>
            <ProgressBar x:Name="ScanProcessBar" HorizontalAlignment="Left" Height="25" Margin="97,10,0,0" VerticalAlignment="Top" Width="394"/>
            <Button x:Name="FolderRefresh" Content="刷新" HorizontalAlignment="Left" Height="23" Margin="97,287,0,0" VerticalAlignment="Top" Width="51" Click="FolderRefresh_OnClick"/>
            <Label x:Name="FolderLoading" Content="加载中..." HorizontalAlignment="Left" Height="23" Margin="10,287,0,0" VerticalAlignment="Top" Width="87"/>
        </Grid>
        <Grid Name="ResultGrid" HorizontalAlignment="Left" Height="337" Margin="129,470,0,0" VerticalAlignment="Top" Width="564">
            <ListView x:Name="ListViewVirInfo" HorizontalAlignment="Left" Height="232" Margin="10,40,0,0" VerticalAlignment="Top" Width="544">
                <ListView.View>
                    <GridView>
                        <GridViewColumn  Width="32">
                            <GridViewColumn.Header >
                                <CheckBox Name="CheckBoxSelectAll" Click="CheckBox_Click_All" ></CheckBox>
                            </GridViewColumn.Header>
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox IsChecked='{Binding Path=IsSelected, Mode=TwoWay}'></CheckBox>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <GridViewColumn Header='病毒名' Width='210' DisplayMemberBinding='{Binding Path=VirName}'/>
                        <GridViewColumn Header='检测引擎' Width='70' DisplayMemberBinding='{Binding Path=DetectEngine}'/>
                        <GridViewColumn Header='文件名' Width='250' DisplayMemberBinding='{Binding Path=FileName}'/>
                        <GridViewColumn Header='处理状态' Width='250' DisplayMemberBinding='{Binding Path=DealState}'/>
                    </GridView>
                </ListView.View>
            </ListView>
            <Label Content="已发现的威胁：" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top"/>
            <Button Name="DeleteItems" Content="删除文件" HorizontalAlignment="Left" Margin="493,277,0,0" VerticalAlignment="Top" Width="61" Height="31" ToolTip="将选中的文件删除" Click="DeleteItems_OnClick"/>
            <Button Name="PackItems" Content="一键打包" HorizontalAlignment="Left" Margin="426,277,0,0" VerticalAlignment="Top" Width="62" Height="31" ToolTip="将选中的文件制作成压缩包" Click="PackItems_OnClick"/>
            <ProgressBar Name="DealProcessBar"  HorizontalAlignment="Left" Height="20" Margin="10,283,0,0" VerticalAlignment="Top" Width="411"/>
        </Grid>
        <Grid Name="ConfigGrid" HorizontalAlignment="Left" Height="312" Margin="129,812,0,0" VerticalAlignment="Top" Width="564">
            <GroupBox Header="扫描设置" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top" Height="188" Width="544">
                <StackPanel HorizontalAlignment="Left" VerticalAlignment="Top" Margin="8,8">
                    <DockPanel>
                        <CheckBox x:Name="EngineWorkers" Content="扫描线程数" Margin="0,0,8,0"/>
                        <Slider IsEnabled="{Binding IsChecked, ElementName=EngineWorkers}" x:Name="SliderWorkers" HorizontalAlignment="Left" VerticalAlignment="Top" Height="27" Minimum="1" Maximum="8" IsSnapToTickEnabled="True" Value="1" Width="175" SmallChange="1" TickFrequency="1" TickPlacement="BottomRight" Margin="0,0,8,0"/>
                        <TextBlock HorizontalAlignment="Left" TextWrapping="Wrap" Text="{Binding Value, ElementName=SliderWorkers}" VerticalAlignment="Top" Margin="0,0,8,0"/>
                        <TextBlock Text="* 注：默认线程数为 4" HorizontalAlignment="Left" VerticalAlignment="Top" Foreground="Red"/>
                    </DockPanel>
                    <DockPanel>
                        <CheckBox x:Name="LogOutput" Content="输出日志文件" Margin="0,0,8,0"/>
                        <TextBlock Text="* 注：日志文件输出至当前目录下" HorizontalAlignment="Left" VerticalAlignment="Top" Foreground="Red" />
                    </DockPanel>
                    <DockPanel Margin="0,10,0,0">
                        <CheckBox x:Name="EngineCloud" Content="启用云引擎" IsChecked="True" Margin="0,0,8,0"/>
                        <CheckBox x:Name="EngineAsg" Content="启用 ASG 引擎" IsChecked="True" Margin="0,0,8,0"/>
                        <CheckBox x:Name="EngineTfe" Content="启用 TFE 引擎" IsChecked="True" Margin="0,0,8,0"/>
                    </DockPanel>
                    <DockPanel Margin="0,10,0,0">
                        <CheckBox x:Name="NonCompound" Content="不拆解文件" Margin="0,0,8,0"/>
                        <CheckBox x:Name="CloudCheck" Content="启用云哈希对照" IsChecked="True" Margin="0,0,8,0"/>
                        <CheckBox x:Name="Treat" Content="自动处理检出的病毒"  Margin="0,0,8,0"/>
                    </DockPanel>
                    <DockPanel Margin="0,10,0,0">
                        <CheckBox x:Name="Thershold" Content="ML 引擎报毒阈值" Margin="0,0,8,0" />
                        <Slider IsEnabled="{Binding IsChecked, ElementName=Thershold}" x:Name="ThersholdValue" HorizontalAlignment="Left" VerticalAlignment="Top" Height="27" Minimum="60" Maximum="100" IsSnapToTickEnabled="True" Value="80" Width="175" SmallChange="10"  TickPlacement="BottomRight" Margin="0,0,8,0" LargeChange="10" TickFrequency="10"/>
                        <TextBlock HorizontalAlignment="Left" TextWrapping="Wrap" Text="{Binding Value, ElementName=ThersholdValue}" VerticalAlignment="Top" Margin="0,0,4,0"/>
                        <TextBlock Text="%" />
                    </DockPanel>
                    <DockPanel>
                        <CheckBox x:Name="Filter" Content="过滤文件名" Margin="0,0,8,0"/>
                        <TextBox x:Name="FilterValue" IsEnabled="{Binding IsChecked, ElementName=Filter}" HorizontalAlignment="Left" Width="220" Margin="0,0,8,0" />
                        <TextBlock Text="* 注：请填写正则表达式" HorizontalAlignment="Left" VerticalAlignment="Top" Foreground="Red"/>
                    </DockPanel>
                </StackPanel>
            </GroupBox>
            <GroupBox Header="关于" HorizontalAlignment="Left" Height="99" Margin="10,203,0,0" VerticalAlignment="Top" Width="544">
                <Grid HorizontalAlignment="Left" Height="74" VerticalAlignment="Top" Width="534" Margin="0,0,-2,0">
                    <Label Content="开发人员：" HorizontalAlignment="Left" Margin="10,10,0,0" VerticalAlignment="Top"/>
                    <Label Content="hez2010, XywCloud" HorizontalAlignment="Left" Margin="80,10,0,0" VerticalAlignment="Top"/>
                    <Label Content="程序版本：" HorizontalAlignment="Left" Margin="10,40,0,0" VerticalAlignment="Top"/>
                    <Label Name="LbProgramVer" Content="" HorizontalAlignment="Left" Margin="80,40,0,0" VerticalAlignment="Top"/>
                    <Label Content="更新日期：" HorizontalAlignment="Left" Margin="260,40,0,0" VerticalAlignment="Top"/>
                    <Label Content="2018.08.19" HorizontalAlignment="Left" Margin="330,40,0,0" VerticalAlignment="Top"/>
                </Grid>
            </GroupBox>
        </Grid>
        <Image HorizontalAlignment="Left" Height="70" Margin="22,111,0,0" VerticalAlignment="Top" Width="70" Source="Resources/lightning.png" Stretch="UniformToFill" Cursor="Hand" MouseDown="Scan_OnMouseDown"/>
        <Label Content="扫描" VerticalContentAlignment="Center" HorizontalAlignment="Left" Margin="41,186,0,0" VerticalAlignment="Top"/>
        <Image HorizontalAlignment="Left" Height="70" Margin="22,225,0,0" VerticalAlignment="Top" Width="70" Source="Resources/details.png" Stretch="UniformToFill" Cursor="Hand" MouseDown="Result_OnMouseDown"/>
        <Label Content="结果" VerticalContentAlignment="Center" HorizontalAlignment="Left" Margin="41,300,0,0" VerticalAlignment="Top"/>
        <Image HorizontalAlignment="Left" Height="70" Margin="22,339,0,0" VerticalAlignment="Top" Width="70" Source="Resources/settings.png" Stretch="UniformToFill" Cursor="Hand" MouseDown="Config_OnMouseDown"/>
        <Label Content="配置" VerticalContentAlignment="Center" HorizontalAlignment="Left" Margin="41,414,0,0" VerticalAlignment="Top"/>
    </Grid>
</Window>